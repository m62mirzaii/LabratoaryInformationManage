@{
    ViewData["Title"] = "نمایش درخواست آزمایش";
    Layout = "~/Views/Shared/_masterLayout.cshtml";
}

@section Script
    {
    <script src="~/website/TestRequest.js" asp-append-version="true"></script>
    <link href="~/css/my-style.css" rel="stylesheet" />
    <link href="~/css/controlpanel-style.css" rel="stylesheet" />

    <link href="~/date_picker/PersianDatePicker.min.css" rel="stylesheet" />
    <script src="~/date_picker/PersianDatePicker.min.js"></script>
 }

<input id="testRequestId_Selected" type="hidden" />
<input id="testRequestDetailId_Selected" type="hidden" />

<input type="hidden" id="PersianToday" data-value='@ViewBag.MyDate' />

<div class="row">

    <div class="card bg-gradient pagerHeader">
        <div class="content table-responsive table-full-width">
            <label style="padding-right : 10px  ; font-size:20px;"> درخواست آزمایش </label>
        </div>
    </div>
    <div class="card m-0" style="align-items: center; height:480px">
        <div class="container" style="margin-top:15px">
            <div class=" table-responsive" style="width:100%">
                <table id="tblTestRequest" class="table table-striped table-bordered text-right" style="cursor:pointer;width:100%">
                    <thead class="thead-color">
                        <tr>
                            <th class="th-color" style="width:120px">شماره درخواست  </th>
                            <th class="th-color" style="width:200px">واحد درخواست</th>
                            <th class="th-color" style="width:250px">کاربر درخواست کننده</th>
                            <th class="th-color" style="width:350px"> نام قطعه</th>
                            <th class="th-color" style="width:350px"> نام سازنده قطعه</th>
                            <th class="th-color" style="width:100px"> تاریخ درخواست </th>
                            <th class="th-color" width="5%"></th>
                            <th class="th-color" width="5%"> <a onclick="ShowPopUp_Insert()" style="font-size:20px;cursor: pointer;"> <i class="fa fa-plus-circle" style="color:white"></i> </a> </th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row" style="margin-top:15px">
    <div class="card m-0" style="align-items: center; height:500px">
        <div class="container" style="margin-top:15px;max-width:100%">

            <div class=" table-responsive" style="width:100%">
                <table id="tblTestRequestDetail" class="table table-striped table-bordered text-right" style="width:100%">
                    <thead style=" background-color: #4c607b; margin-right:15px">
                        <tr>
                            <th class="th-color" style="width:700px">نام تست </th>
                            <th class="th-color" style="width:250px">   کاربرد تست</th>
                            <th class="th-color" width="5%">
                                <a onclick="ShowPopUp_InsertDetail()" style="font-size:20px;cursor: pointer;"> <i class="fa fa-plus-circle" style="color:white"></i> </a>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>

        </div>
    </div>
</div>

<!-- Modal Popup -->
<div id="insertTestRequestModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 20%">
        <div class="modal-content modalStyle">
            <div class="modal-header">
                <label>ثبت / ویرایش اطلاعات</label>
                <img src="~/img/modal-header.png" />
            </div>
            <div id="insertTestRequestModal_body" class="modal-body">
                <div class="row alertBox hidden" id="alertBox">
                    <span role="alert" class="alert"></span>
                </div>

                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">شماره درخواست</label>
                            <span style="color:red">*</span>
                            <input id="txt_RequestNumber" class="form-control" type="text" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">واحد درخواست</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="requestUnit" name="requestUnit" style="width:300px"></select>
                            <input id="requestUnitId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">کاربر درخواست کننده</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="requestUser" name="requestUser" style="width:300px"></select>
                            <input id="requestUserId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">قطعه</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="piece" name="piece" style="width:300px"></select>
                            <input id="pieceId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">نام سازنده قطعه</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="company" name="company" style="width:300px"></select>
                            <input id="companyId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">تاریخ درخواست</label>
                            <span style="color:red">*</span>
                            <input class="form-control" id="txt_RequestDate" onclick="PersianDatePicker.Show(this, '@ViewBag.MyDate')" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6"></div>
                    <div class="col-6">
                        <input type="submit" value="ذخیره" onclick="insert_TestRequest()" style="width:90px" class="btn btn-sm btn-success" />
                        <input type="submit" value="انصراف" onclick="ClosePopUp_Insert()" class="btn btn-sm btn-danger" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Popup -->
<div id="updateTestRequestModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 20%">
        <div class="modal-content modalStyle">
            <div class="modal-header">
                <label>   ویرایش اطلاعات</label>
                <img src="~/img/modal-header.png" />
            </div>
            <div id="updateTestRequestModal_body" class="modal-body">
                <div class="row alertBox hidden" id="alertBox">
                    <span role="alert" class="alert"></span>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">شماره درخواست</label>
                            <span style="color:red">*</span>
                            <input id="txt_RequestNumber_update" class="form-control" type="text" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">واحد درخواست</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="requestUnit_update" name="requestUnit_update" style="width:300px"></select>
                            <input id="requestUnitId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">کاربر درخواست کننده</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="requestUser_update" name="requestUser_update" style="width:300px"></select>
                            <input id="requestUserId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">قطعه</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="piece_update" style="width:300px"></select>
                            <input id="pieceId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">نام سازنده قطعه</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="company_update" style="width:300px"></select>
                            <input id="companyId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-8">
                        <div class="form-group">
                            <label class="control-label">تاریخ درخواست</label>
                            <span style="color:red">*</span>
                            <input class="form-control" id="txt_RequestDate_update" onclick="PersianDatePicker.Show(this, '@ViewBag.MyDate')" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-6"></div>
                    <div class="col-6" style="margin-top:19px">
                        <input type="submit" value="ویرایش" onclick="update_TestRequest()" style="width:90px" class="btn btn-sm btn-primary" />
                        <input type="submit" value="انصراف" onclick="ClosePopUp_Update()" class="btn btn-sm btn-danger" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
 

<!-- Modal Popup -->
<div id="insertTestRequestDetailModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 70%">
        <div class="modal-content modalStyle">
            <div class="modal-header">
                <label>ثبت / ویرایش اطلاعات</label>
                <img src="~/img/modal-header.png" />
            </div>
            <div id="insertTestRequestDetailModal_body" class="modal-body">
                <div class="row alertBox hidden" id="alertBox">
                    <span role="alert" class="alert"></span>
                </div>

                <div class="row" style="padding-bottom:20px">
                    <div class=" table-responsive" style="width:100%; height:800px">
                        <div style="height:750px">

                            <table id="tblTestRequestDetail_Insert" class="table table-striped table-bordered text-right" style="width:100%">
                                <thead class="thead-color" style="width:100%">
                                    <tr>
                                        <td class="th-color"></td>
                                        <th class="th-color" style="width:300px">محصول </th>
                                        <th class="th-color" style="width:300px">نام کاربرد</th>
                                        <th class="th-color">اهمیت تست  </th>
                                        <th class="th-color">کد ابزار  </th>
                                        <th class="th-color">هزینه</th>
                                        <th class="th-color">حداقل</th>
                                        <th class="th-color">حداکثر</th>
                                        <th class="th-color" style="width:120px">استاندارد</th>
                                        <th class="th-color">واحد</th>
                                        <th class="th-color" style="width:300px">شرح</th>
                                        <th class="th-color">از تاریخ</th>
                                        <th class="th-color"> تا تاریخ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6"></div>
                    <div class="col-6">
                        <input type="submit" value="ذخیره" onclick="Insert_TestRequestDetail()" style="width:100px" class="btn btn-sm btn-success" />
                        <input type="submit" value="انصراف" onclick="closePopup_InsertDetail()" style="width:100px" class="btn btn-sm btn-danger" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>










@* <!-- Modal Popup -->
<div id="updateTestRequestDetailModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 30%">
        <div class="modal-content modalStyle">
            <div class="modal-header">
                <label>   ویرایش اطلاعات</label>
                <img src="~/img/modal-header.png" />
            </div>
            <div id="updateTestRequestDetailModal_body" class="modal-body">
                <div class="row alertBox hidden" id="alertBox">
                    <span role="alert" class="alert"></span>
                </div>

                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">میانگین</label>
                            <span style="color:red">*</span>
                            <input id="txt_Avarage" type="text" class="form-control" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">کد ابزار</label>
                            <span style="color:red">*</span>
                            <input id="txt_ToolCode" type="text" class="form-control" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">تاریخ شروع</label>
                            <span style="color:red">*</span>
                            <input class="form-control" id="txt_FromDate" onclick="PersianDatePicker.Show(this, '@ViewBag.MyDate')" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">تاریخ پایان</label>
                            <span style="color:red">*</span>
                            <input class="form-control" id="txt_EndDate" onclick="PersianDatePicker.Show(this, '@ViewBag.MyDate')" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">رطوبت</label>
                            <span style="color:red">*</span>
                            <input id="txt_Humidity" maxlength="2" type="text" class="form-control" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">دما</label>
                            <span style="color:red">*</span>
                            <input id="txt_Temperature" maxlength="2" type="text" class="form-control" />
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6"></div>
                    <div class="col-6">
                        <input type="submit" value="ویرایش" id="btnUpdateTestRequestDetail" class="btn btn-sm btn-success" />
                        <input type="submit" value="انصراف" id="btncloseUpdateTestRequestDetailModal" class="btn btn-sm btn-danger" />
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
 *@