@{
    ViewData["Title"] = "نمایش آزمایش ها";
    Layout = "~/Views/Shared/_masterLayout.cshtml";
}

@section Script
    {
    <script src="~/website/Test.js" asp-append-version="true"></script>
    <link href="~/css/my-style.css" rel="stylesheet" />
    <link href="~/date_picker/PersianDatePicker.min.css" rel="stylesheet" />
    <script src="~/date_picker/PersianDatePicker.min.js"></script>
}

<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<input id="testId_Selected" class="form-control" type="hidden" />
<input type="hidden" id="PersianToday" data-value='@ViewBag.MyDate' />
<div class="card bg-gradient pagerHeader">
    <div class="content table-responsive table-full-width">
        <label style="padding-right : 10px  ; font-size:20px;"> آزمایش ها </label>
    </div>
</div>
<div class="card m-0" style="align-items: center">
    <div class="container" style="margin-top:15px; margin-bottom:15px">
        <div class=" table-responsive" style="width:100%">
            <table id="tblTest" class="table table-striped table-bordered text-right">
                <thead class="thead-color">
                    <tr>
                        <th class="th-color" style="width:250px">نام تست </th>
                        <th class="th-color" style="width:200px">نام کاربرد</th>
                        <th class="th-color">اهمیت تست  </th>
                        <th class="th-color">کد ابزار  </th>
                        <th class="th-color">هزینه</th>
                        <th class="th-color">حداقل</th>
                        <th class="th-color">حداکثر</th>
                        <th class="th-color" style="width:120px">استاندارد</th>
                        <th class="th-color">واحد</th>
                        <th class="th-color" style="width:300px">شرح</th>
                        <th class="th-color">از تاریخ</th>
                        <th class="th-color"> تا تاریخ</th>
                        <th class="th-color"></th>
                        <th class="th-color">
                            <a style="font-size:20px;cursor: pointer;" onclick="ShowPopUp_Insert()"> <i class="fa fa-plus-circle" style="color:white"></i> </a>
                        </th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modal Popup -->
<div id="insertTestModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 30%">
        <div class="modal-content modalStyle">
            <div class="modal-header">
                <label>ثبت / ویرایش اطلاعات</label>
                <img src="~/img/modal-header.png" />
            </div>
            <div id="insertTestModal_body" class="modal-body">
                <div class="row alertBox hidden" id="alertBox">
                    <span role="alert" class="alert"></span>
                </div>

                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label"> نام آزمایش</label>
                            <span style="color:red">*</span>
                            <input id="txt_TestName" class="form-control" />
                        </div>
                    </div>
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">نام کاربرد</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="testCondition" style="width:300px"></select>
                            <input id="testConditionId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">اهمیت</label>
                            <select class="form-control" id="testImportance" style="width:300px"></select>
                            <input id="testImportanceId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">کد ابزار</label>
                            <select class="form-control" id="labratoaryTool" style="width:300px"></select>
                            <input id="labratoaryToolId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">هزینه</label>
                            <span style="color:red">*</span>
                            <input value="" id="txt_Amount" type="text" class="form-control" />
                        </div>
                    </div> 
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">استاندارد</label>
                            <select class="form-control" id="standard" style="width:300px"></select>
                            <input id="standardId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div> 
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">حداقل</label>
                            <input id="txt_Min" type="text" class="form-control" />
                        </div>
                    </div> 

                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">حداکثر</label>
                            <input id="txt_Max" type="text" class="form-control" />
                        </div>
                    </div>
                </div>

                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">واحد</label>
                            <select class="form-control" id="measure" style="width:300px"></select>
                            <input id="measureId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div> 
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">شرح</label>
                            <select class="form-control" id="testDescription" name="testDescription" style="width:300px"></select>
                            <input id="testDescriptionId" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">از تاریخ</label>
                            <span style="color:red">*</span>
                            <input class="form-control" id="txt_FromDate" onclick="PersianDatePicker.Show(this, '@ViewBag.MyDate')" />
                        </div>
                    </div>              
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">تا تاریخ</label>
                            <span style="color:red">*</span>
                            <input class="form-control" id="txt_EndDate" onclick="PersianDatePicker.Show(this, '@ViewBag.MyDate')" />
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6"></div>
                    <div class="col-6">
                        <input type="submit" value="ذخیره" onclick="InsertTest()" style="width:120px" class="btn btn-sm btn-success" />
                        <input type="button" value="انصراف" onclick="ClosePopUp_Insert()" class="btn btn-sm btn-danger" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Popup -->
<div id="updateTestModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 30%">
        <div class="modal-content modalStyle">
            <div class="modal-header">
                <label>   ویرایش اطلاعات</label>
                <img src="~/img/modal-header.png" />
            </div>
            <div id="updateTestModal_body" class="modal-body">
                <div class="row alertBox hidden" id="alertBox">
                    <span role="alert" class="alert"></span>
                </div>

                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label"> نام آزمایش</label>
                            <span style="color:red">*</span>
                            <input id="txt_TestName_update" class="form-control" />
                        </div>
                    </div>

                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">نام کاربرد</label>
                            <span style="color:red">*</span>
                            <select class="form-control" id="testCondition_update" style="width:300px"></select>
                            <input id="testConditionId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">اهمیت</label>
                            <select class="form-control" id="testImportance_update" style="width:300px"></select>
                            <input id="testImportanceId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>

                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">کد ابزار</label>
                            <select class="form-control" id="labratoaryTool_update" style="width:300px"></select>
                            <input id="labratoaryToolId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">هزینه</label>
                            <span style="color:red">*</span>
                            <input value="" id="txt_Amount_update" type="text" class="form-control" onkeypress="return AllowOnlyNumbers(event);" />
                        </div>
                    </div>

                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">استاندارد</label>
                            <select class="form-control" id="standard_update" style="width:300px"></select>
                            <input id="standardId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">حداقل</label>
                            <input id="txt_Min_update" type="text" class="form-control" />
                        </div>
                    </div>

                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">حداکثر</label>
                            <input id="txt_Max_update" type="text" class="form-control" />
                        </div>
                    </div>
                </div>

                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">واحد</label>
                            <select class="form-control" id="measure_update" style="width:300px"></select>
                            <input id="measureId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>

                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">شرح</label>
                            <select class="form-control" id="testDescription_update" style="width:300px"></select>
                            <input id="testDescriptionId_update" class="form-control" type="hidden" readonly="readonly" />
                        </div>
                    </div>
                </div>
                <div class="row" style="padding-bottom:20px">
                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">از تاریخ</label>
                            <span style="color:red">*</span>
                            <input class="form-control" id="txt_FromDate_update" onclick="PersianDatePicker.Show(this, '@ViewBag.MyDate')" />
                        </div>
                    </div>

                    <div class="col-5">
                        <div class="form-group">
                            <label class="control-label">تا تاریخ</label>
                            <span style="color:red">*</span>
                            <input class="form-control" id="txt_EndDate_update" onclick="PersianDatePicker.Show(this, '@ViewBag.MyDate')" />
                        </div>
                    </div>
                </div>

                <div class="row" style="padding-bottom:20px">
                    <div class="col-6"></div>
                    <div class="col-6" style="margin-top:19px">
                        <input type="submit" value="ویرایش" onclick="UpdateTest()" style="width:90px" class="btn btn-sm btn-primary" />
                        <input type="submit" value="انصراف" onclick="ClosePopUp_Update()" class="btn btn-sm btn-danger" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
